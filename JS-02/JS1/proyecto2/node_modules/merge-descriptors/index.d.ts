);return r||this.categoryDocumentPromiseMap.set(e,o),o}))}isCategoryDocumentStale(e){return!e||(new Date).getTime()-e>9e5}getCategoryDocumentAndRefreshCache(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){const r=s.jG.CurrentMarket+"|"+t;return this.fetchCategoryDocument(e).then((e=>{try{const t={categoryDocumentKey:r,categoryDocumentData:e,storageTimestamp:(new Date).getTime()};this.categoryDataCacheMap.set(r,t),this.indexedDb.setObject(r,t)}catch(e){h.M0.sendAppErrorEvent(Object.assign(Object.assign({},g.hDP.CategoryDataIndexedDbWriteFailed),{message:`Failed on writing data into IndexedDb for Category Data connector. Erro